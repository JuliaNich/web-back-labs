{% extends "base.html" %}

{% block lab %}Лабораторная работа 4 - Заказ зерна{% endblock %}

{% block main %}
    <h1>Заказ зерна</h1>
    
    <form method="post">
        <div>
            <label for="grain_type">Выберите тип зерна:</label>
            <select id="grain_type" name="grain_type">
                <option value="barley">Ячмень</option>
                <option value="oats">Овёс</option>
                <option value="wheat">Пшеница</option>
                <option value="rye">Рожь</option>
            </select>
        </div>
        
        <div>
            <label for="weight">Вес (тонны):</label>
            <input type="number" id="weight" name="weight" step="0.1" min="0.1" value="{{ weight }}">
        </div>
        
        <div>
            <button type="submit">Оформить заказ</button>
        </div>
    </form>
    
    {% if error %}
        <div style="color: red; font-weight: bold; margin: 20px 0; padding: 10px; border: 1px solid red;">
            {{ error }}
        </div>
    {% endif %}
    
    {% if success %}
        <div style="color: green; font-weight: bold; margin: 20px 0; padding: 10px; border: 1px solid green;">
            Заказ успешно сформирован. Вы заказали {{ grain_name }}. Вес: {{ weight }} т. Сумма к оплате: {{ "%.2f"|format(total) }} руб
        </div>
        
        {% if discount_applied %}
            <div style="color: blue; margin: 10px 0; padding: 10px; border: 1px solid blue;">
                Применена скидка 10% за большой объём. Размер скидки: {{ "%.2f"|format(discount_amount) }} руб
            </div>
        {% endif %}
    {% endif %}
    
    <div style="margin-top: 20px;">
        <a href="/lab4">Вернуться к лабораторной работе 4</a>
    </div>
{% endblock %}